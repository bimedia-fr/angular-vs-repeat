!function(a,b){"use strict";var c=-1!=navigator.appVersion.indexOf("Mac"),d="undefined"!=typeof a.onwheel?"wheel":"undefined"!=typeof a.onmousewheel?"mousewheel":"DOMMouseScroll",e=document.documentElement,f=e.matches?"matches":e.matchesSelector?"matchesSelector":e.webkitMatches?"webkitMatches":e.webkitMatchesSelector?"webkitMatchesSelector":e.msMatches?"msMatches":e.msMatchesSelector?"msMatchesSelector":e.mozMatches?"mozMatches":e.mozMatchesSelector?"mozMatchesSelector":null,g=b.element.prototype.closest||function(a){for(var c=this[0].parentNode;c!==document.documentElement&&null!=c&&!c[f](a);)c=c.parentNode;return c&&c[f](a)?b.element(c):b.element()};b.module("vs-repeat",[]).directive("vsRepeat",["$compile",function(e){return{restrict:"A",scope:!0,require:"?^vsRepeat",controller:["$scope",function(a){this.$scrollParent=a.$scrollParent,this.$fillElement=a.$fillElement}],compile:function(f){var i=f.children().eq(0),j=i.attr("ng-repeat")?"ng-repeat":"data-ng-repeat",k=i.attr(j),l=i[0].outerHTML,m=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(k),n=m[1],o=m[2],p=m[3],q="$vs_collection",r={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsExcess:"excess"};return f.empty(),{pre:function(f,h,i,k){function F(){if(!s||s.length<1)return f[q]=[],t=0,O(0),f.sizesCumulative=[0],void 0;if(t=s.length,y){f.sizes=s.map(function(a){return a[i.vsSizeProperty]});var a=0;f.sizesCumulative=f.sizes.map(function(b){var c=a;return a+=b,c}),f.sizesCumulative.push(a)}G(),N()}function G(){x&&f.$$postDigest(function(){if(h[0].offsetHeight||h[0].offsetWidth)for(var a=h.children(),b=0;b<a.length;){if(null!=a[b].attributes[j]){a[b][D]&&(f.elementSize=a[b][D],N(),x=!1,f.$root&&!f.$root.$$phase&&f.$apply());break}b++}else var c=f.$watch(function(){(h[0].offsetHeight||h[0].offsetWidth)&&(c(),G())})})}function J(a){var b=a.currentTarget;(b.scrollWidth>b.clientWidth||b.scrollHeight>b.clientHeight)&&v.css("display","block")}function K(){"undefined"!=typeof i.vsAutoresize&&(x=!0,G(),f.$root&&!f.$root.$$phase&&f.$apply()),R()&&f.$apply()}function N(){L=void 0,M=void 0,R(),O(y?f.sizesCumulative[t]:f.elementSize*t),f.$emit("vsRepeatReinitialized")}function O(a){if(u){if(w.css({width:f.offsetBefore+a+f.offsetAfter+"px",height:"100%"}),k&&k.$fillElement){var b=k.$fillElement[0].parentNode.querySelector("["+j+"]");b&&k.$fillElement.css({width:b.scrollWidth+"px"})}}else w.css({height:f.offsetBefore+a+f.offsetAfter+"px",width:"100%"}),k&&k.$fillElement&&(b=k.$fillElement[0].parentNode.querySelector("["+j+"]"),b&&k.$fillElement.css({height:b.scrollHeight+"px"}))}function Q(){var a=z[0][C];a!==P&&(N(),f.$root&&!f.$root.$$phase&&f.$apply()),P=a}function R(){if(y){for(f.startIndex=0;f.sizesCumulative[f.startIndex]<z[0][E]-f.offsetBefore;)f.startIndex++;for(f.startIndex>0&&f.startIndex--,f.endIndex=f.startIndex;f.sizesCumulative[f.endIndex]<z[0][E]-f.offsetBefore+z[0][C];)f.endIndex++}else f.startIndex=Math.max(Math.floor((z[0][E]-f.offsetBefore)/f.elementSize+f.excess/2)-f.excess,0),f.endIndex=Math.min(f.startIndex+Math.ceil(z[0][C]/f.elementSize)+f.excess,t);var a=f.startIndex!==L||f.endIndex!==M;return 1===f.startIndex%2&&f.startIndex--,a&&(f[q]=s.slice(f.startIndex,f.endIndex)),L=f.startIndex,M=f.endIndex,a}var t,v,w,m=b.element(l),s=[],u="undefined"!=typeof i.vsHorizontal,x=!i.vsRepeat,y=!!i.vsSizeProperty,z=i.vsScrollParent?g.call(h,i.vsScrollParent):h,A=u?"translateX":"translateY",B=u?"left":"top",C=u?"clientWidth":"clientHeight",D=u?"offsetWidth":"offsetHeight",E=u?"scrollLeft":"scrollTop";if(0===z.length)throw"Specified scroll parent selector did not match any element";f.$scrollParent=z,y&&(f.sizesCumulative=[]),f.elementSize=z[0][C]||50,f.offsetBefore=0,f.offsetAfter=0,f.excess=2,Object.keys(r).forEach(function(a){i[a]&&i.$observe(a,function(b){f[r[a]]=+b,N()})}),f.$watchCollection(o,function(a){s=a||[],F()}),m.attr(j,n+" in "+q+(p?" "+p:"")).addClass("vs-repeat-repeated-element");var H=y?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)";"undefined"!=typeof document.documentElement.style.transform?m.attr("ng-style",'{ "transform": "'+A+'(" + '+H+' + "px)"}'):"undefined"!=typeof document.documentElement.style.webkitTransform?m.attr("ng-style",'{ "-webkit-transform": "'+A+'(" + '+H+' + "px)"}'):m.attr("ng-style","{"+B+": "+H+' + "px"}'),e(m)(f),h.append(m),w=b.element('<div class="vs-repeat-fill-element"></div>').css({position:"relative","min-height":"100%","min-width":"100%"}),h.append(w),e(w)(f),f.$fillElement=w;var I={};c&&(v=b.element('<div class="vs-repeat-wheel-helper"></div>').on(d,function(a){a.preventDefault(),a.stopPropagation(),a.originalEvent&&(a=a.originalEvent),z[0].scrollLeft+=a.deltaX||-a.wheelDeltaX,z[0].scrollTop+=a.deltaY||-a.wheelDeltaY}).on("mousemove",function(a){(I.x!==a.clientX||I.y!==a.clientY)&&b.element(this).css("display","none"),I={x:a.clientX,y:a.clientY}}).css("display","none"),w.append(v)),f.startIndex=0,f.endIndex=0,z.on("scroll",function(){R()&&f.$apply()}),c&&z.on(d,J),b.element(a).on("resize",K),f.$on("$destroy",function(){b.element(a).off("resize",K)}),f.$on("vsRepeatTrigger",F),f.$on("vsRepeatResize",function(){x=!0,G()});var L,M,P;f.$watch(function(){"function"==typeof a.requestAnimationFrame?a.requestAnimationFrame(Q):Q()})}}}}}])}(window,window.angular);