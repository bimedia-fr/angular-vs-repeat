!function(e,t){"use strict";var n=-1!=navigator.appVersion.indexOf("Mac"),s="undefined"!=typeof e.onwheel?"wheel":"undefined"!=typeof e.onmousewheel?"mousewheel":"DOMMouseScroll",o=document.documentElement,i=o.matches?"matches":o.matchesSelector?"matchesSelector":o.webkitMatches?"webkitMatches":o.webkitMatchesSelector?"webkitMatchesSelector":o.msMatches?"msMatches":o.msMatchesSelector?"msMatchesSelector":o.mozMatches?"mozMatches":o.mozMatchesSelector?"mozMatchesSelector":null,l=t.element.prototype.closest||function(e){for(var n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[i](e);)n=n.parentNode;return n&&n[i](e)?t.element(n):t.element()};t.module("vs-repeat",[]).directive("vsRepeat",["$compile",function(o){return{restrict:"A",scope:!0,require:"?^vsRepeat",controller:["$scope",function(e){this.$scrollParent=e.$scrollParent,this.$fillElement=e.$fillElement}],compile:function(i){var r=i.children().eq(0),a=r.attr("ng-repeat")?"ng-repeat":"data-ng-repeat",f=r.attr(a),c=r[0].outerHTML,d=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(f),u=d[1],m=d[2],p=d[3],h="$vs_collection",v={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsExcess:"excess"};return console.log("ngRepeatExpression",f),i.empty(),{pre:function(i,r,f,d){function $(){if(!B||B.length<1)return i[h]=[],M=0,S(0),void(i.sizesCumulative=[0]);if(M=B.length,A){i.sizes=B.map(function(e){return e[f.vsSizeProperty]});var e=0;i.sizesCumulative=i.sizes.map(function(t){var n=e;return e+=t,n}),i.sizesCumulative.push(e)}x(),z()}function x(){R&&i.$$postDigest(function(){if(r[0].offsetHeight||r[0].offsetWidth)for(var e=r.children(),t=0;t<e.length;){if(null!=e[t].attributes[a]){e[t][T]&&(i.elementSize=e[t][T],z(),R=!1,i.$root&&!i.$root.$$phase&&i.$apply());break}t++}else var n=i.$watch(function(){(r[0].offsetHeight||r[0].offsetWidth)&&(n(),x())})})}function g(e){var t=e.currentTarget;(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)&&E.css("display","block")}function y(){"undefined"!=typeof f.vsAutoresize&&(R=!0,x(),i.$root&&!i.$root.$$phase&&i.$apply()),I()&&i.$apply()}function z(){Y=void 0,N=void 0,I(),S(A?i.sizesCumulative[M]:i.elementSize*M),i.$emit("vsRepeatReinitialized")}function S(e){if(C){if(b.css({width:i.offsetBefore+e+i.offsetAfter+"px",height:"100%"}),d&&d.$fillElement){var t=d.$fillElement[0].parentNode.querySelector("["+a+"]");t&&d.$fillElement.css({width:t.scrollWidth+"px"})}}else b.css({height:i.offsetBefore+e+i.offsetAfter+"px",width:"100%"}),d&&d.$fillElement&&(t=d.$fillElement[0].parentNode.querySelector("["+a+"]"),t&&d.$fillElement.css({height:t.scrollHeight+"px"}))}function w(){var e=H[0][q];e!==L&&(z(),i.$root&&!i.$root.$$phase&&i.$apply()),L=e}function I(){if(A){for(i.startIndex=0;i.sizesCumulative[i.startIndex]<H[0][D]-i.offsetBefore;)i.startIndex++;for(i.startIndex>0&&i.startIndex--,i.endIndex=i.startIndex;i.sizesCumulative[i.endIndex]<H[0][D]-i.offsetBefore+H[0][q];)i.endIndex++}else i.startIndex=Math.max(Math.floor((H[0][D]-i.offsetBefore)/i.elementSize+i.excess/2)-i.excess,0),i.endIndex=Math.min(i.startIndex+Math.ceil(H[0][q]/i.elementSize)+i.excess,M);var e=i.startIndex!==Y||i.endIndex!==N;return i.startIndex%2===1&&i.startIndex--,e&&(i[h]=B.slice(i.startIndex,i.endIndex)),Y=i.startIndex,N=i.endIndex,e}var M,E,b,k=t.element(c),B=[],C="undefined"!=typeof f.vsHorizontal,R=!f.vsRepeat,A=!!f.vsSizeProperty,H=f.vsScrollParent?l.call(r,f.vsScrollParent):r,P=C?"translateX":"translateY",W=C?"left":"top",q=C?"clientWidth":"clientHeight",T=C?"offsetWidth":"offsetHeight",D=C?"scrollLeft":"scrollTop";if(0===H.length)throw"Specified scroll parent selector did not match any element";i.$scrollParent=H,A&&(i.sizesCumulative=[]),i.elementSize=H[0][q]||50,i.offsetBefore=0,i.offsetAfter=0,i.excess=2,Object.keys(v).forEach(function(e){f[e]&&f.$observe(e,function(t){i[v[e]]=+t,z()})}),i.$watchCollection(m,function(e){B=e||[],$()}),k.attr(a,u+" in "+h+(p?" "+p:"")).addClass("vs-repeat-repeated-element");var O=A?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)";"undefined"!=typeof document.documentElement.style.transform?k.attr("ng-style",'{ "transform": "'+P+'(" + '+O+' + "px)"}'):"undefined"!=typeof document.documentElement.style.webkitTransform?k.attr("ng-style",'{ "-webkit-transform": "'+P+'(" + '+O+' + "px)"}'):k.attr("ng-style","{"+W+": "+O+' + "px"}'),o(k)(i),r.append(k),b=t.element('<div class="vs-repeat-fill-element"></div>').css({position:"relative","min-height":"100%","min-width":"100%"}),r.append(b),o(b)(i),i.$fillElement=b;var X={};n&&(E=t.element('<div class="vs-repeat-wheel-helper"></div>').on(s,function(e){e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e=e.originalEvent),H[0].scrollLeft+=e.deltaX||-e.wheelDeltaX,H[0].scrollTop+=e.deltaY||-e.wheelDeltaY}).on("mousemove",function(e){(X.x!==e.clientX||X.y!==e.clientY)&&t.element(this).css("display","none"),X={x:e.clientX,y:e.clientY}}).css("display","none"),b.append(E)),i.startIndex=0,i.endIndex=0,H.on("scroll",function(){I()&&i.$apply()}),n&&H.on(s,g),t.element(e).on("resize",y),i.$on("$destroy",function(){t.element(e).off("resize",y)}),i.$on("vsRepeatTrigger",$),i.$on("vsRepeatResize",function(){R=!0,x()});var Y,N,L;i.$watch(function(){"function"==typeof e.requestAnimationFrame?e.requestAnimationFrame(w):w()})}}}}}])}(window,window.angular);